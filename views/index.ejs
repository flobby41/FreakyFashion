<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/>
    <link rel="stylesheet" href="/css/styles.css" />
    <title>Freaky Fashion</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap");
    </style>
  </head>
  <body>
    <header>
      <div class="header-container">
        <h1>FreakyFashion</h1>
        <div class="input-i">
          <form action="/products/search" method="GET" class="input-i">
            <input 
              class="search-bar" 
              name="query" 
              placeholder="Sök produkt"
              aria-label="Search"
            />
          </form>
          <div class="favicons">
            <a href=""><i class="fa fa-heart"></i></a>
            <a href="/checkout"><i class="fa fa-korg">&#xf291;</i></a>
          </div>
        </div>
        </div>
        </div>
      </div>
      <nav class="menu">
        <ul class="menu-list">
          <li class="menu-list-item">Nyheter</li>
          <li class="menu-list-item Kategorier">Kategorier</li>
          <li class="menu-list-item">Topplistan</li>
          <li class="menu-list-item">Rea</li>
          <li class="menu-list-item">Kampanjer</li>
        </ul>
      </nav>
    </header>
    <main>
      <section id="container-hero">
        <img
          src="/img/running.webp"
          width="1250"
          height="601"
          alt="running-pic"
        />
        <div>
          <h2>Lorem ipsum dolor.</h2>
          <p class="text">
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Est officia
            quo excepturi harum accusamus alias beatae ex error saepe aliquam,
            nam quam totam deleniti, quibusdam quas labore accusantium ducimus
            incidunt.
          </p>
        </div>
      </section>
      <section id="spots">
        <div class="container-spots">
          <figure>
            <a href=""
              ><img
                src="img/gaultier-freak-show-paris-4.webp"
                width="252"
                height="168"
                alt="Jean-Paul-Gaultier-Show1"
              />
              <h3>Jean-Paul-Gaultier</h3></a
            >
          </figure>
          <figure>
            <a href=""
              ><img
                src="img/Moschino.avif"
                width="252"
                height="168"
                alt="Jean-Paul-Gaultier-Show2"
              />
              <h3>Marrant</h3></a
            >
          </figure>
          <figure>
            <a href=""
              ><img
                src="img/JPG.webp"
                width="252"
                height="168"
                alt="Jean-Paul-Gaultier-Show3"
              />
              <h3>MacQueen</h3>
            </a>
          </figure>
        </div>
      </section>
      <section id="populäraPrd">
        <% products.forEach(product => { %>
          <% 
            // Vérification du format de publicationDate et filtrage des dates futures
            const publicationDateString = product.publicationDate || "";
            const isValidDate = /^\d{4}-\d{2}-\d{2}$/.test(publicationDateString);
            let shouldDisplay = false;
            let isNewProduct = false;
      
            if (isValidDate) {
              const currentDate = new Date();
              currentDate.setHours(0, 0, 0, 0); // Normaliser l'heure à minuit
              const publicationDate = new Date(publicationDateString);
      
              // Afficher uniquement les produits avec une date de publication antérieure ou égale à aujourd'hui
              shouldDisplay = publicationDate <= currentDate;
      
              // Calculer la différence en jours pour déterminer si le produit est récent
              const differenceInDays = (currentDate - publicationDate) / (1000 * 3600 * 24);
              isNewProduct = differenceInDays < 7;
            }
          %>
          <% if (shouldDisplay) { %>
            <div class="tshirt-container">
              <a href="/products/<%= product.slug %>">
                <img src="/img/<%= product.picture %>" width="500" alt="<%= product.name %>" />
              </a>
      
              <% if (isNewProduct) { %>
                <p class="nyhet-p">Nyhet</p>
              <% } %>
      
              <a href=""><i class="fa-regular fa-heart heart-p"></i></a>
              <div class="tshirt-infos-container">
                <p><%= product.name %></p>
                <p><%= product.price %></p>
              </div>
              <h5><%= product.brand %></h5>
            </div>
          <% } %>
        <% }) %>
      </section>
    </main>
    <footer>
      <section id="payment-infos">
        <div class="payment-infos-container">
          <div>
            <i class="fa-solid fa-earth-americas"></i>Gratis frakt och returer
          </div>
          <div><i class="fa-solid fa-plane"></i>Express frakt</div>
          <div>
            <i class="fa-sharp fa-solid fa-shield-halved"></i>Säkra betalningar
          </div>
          <div><i class="fa-regular fa-face-smile"></i>Nyheter varje dag</div>
        </div>
      </section>
      <section id="footer-sec">
        <div id="footer">
          <button class="accordion">Shopping</button>
          <div class="panel">
            <ul>
              <li class="footer-title">Shopping</li>
              <li>Vinterjackor</li>
              <li>Pufferjackor</li>
              <li>Kappa</li>
              <li>Trenchcoats</li>
            </ul>
          </div>
          <button class="accordion">Mina Sidor</button>
          <div class="panel">
            <ul>
              <li class="footer-title">Mina Sidor</li>
              <li>Mina ordrar</li>
              <li>Mitt konto</li>
            </ul>
          </div>
          <button class="accordion">Kundjänst</button>
          <div class="panel">
            <ul>
              <li class="footer-title">Kundjänst</li>
              <li>Returnpolicy</li>
              <li>Integritetspolicy</li>
            </ul>
          </div>
        </div>
        <small><p>&copy;FreakyFashion</p></small>
      </section>
    </footer>
    <script src="/js/accordion.js"></script>
  </body>
</html>
